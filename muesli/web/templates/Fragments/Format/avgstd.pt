<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<metal:main metal:define-macro="avgstd">

      <span class="popup">
        <span tal:define="fF lambda f: '%.1f' % f if (f is not None and isinstance(f, Number)) else '-'">
          <span tal:condition="'TUTORIALS'     in statistics_data" class="points" tal:attributes="style 'display:none' if statistics_images else False">${'%s / %s' % (fF(statistics_data['TUTORIALS']['avg']), fF(statistics_data['LECTURE']['avg']))}</span>
          <span tal:condition="'TUTORIALS' not in statistics_data" class="points" tal:attributes="style 'display:none' if statistics_images else False">${'%s' % fF(statistics_data['LECTURE']['avg'])}</span>
          <span tal:condition='statistics_images'>
            <img tal:condition="'TUTORIALS'     in statistics_data" tal:attributes="src request.route_path('exam_statistics_bar', max=statistics_data.get('max', 4), lecture_points=statistics_data['LECTURE']['avg'] or 0, tutorial_points=statistics_data['TUTORIALS']['avg'] or 0)" />
            <img tal:condition="'TUTORIALS' not in statistics_data" tal:attributes="src request.route_path('exam_statistics_bar', max=statistics_data.get('max', 4), lecture_points=statistics_data['LECTURE']['avg'] or 0, tutorial_points='')" />
          </span>
          <span class="balloon">
            <table>
            <tr tal:condition="'tut_avg' in statistics_data">
              <td>Übungsgruppe</td>
              <td>${u'%s±%s (%u Personen)' % (fF(statistics_data['TUTORIALS']['avg']), fF(statistics_data['TUTORIALS']['stddev']), statistics_data['TUTORIALS']['count'])}</td>
            </tr>
            <tr>
               <td>${'Vorlesung' if tutorial_ids else ''}</td>
               <td>${u'%s±%s (%u Personen)' % (fF(statistics_data['LECTURE']['avg']), fF(statistics_data['LECTURE']['stddev']), statistics_data['LECTURE']['count'])}</td>
            </tr>
          </table>
        </span>
        </span>
      </span>

</metal:main>

